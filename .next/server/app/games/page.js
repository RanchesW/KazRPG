(()=>{var e={};e.id=423,e.ids=[423],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1406:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>o,originalPathname:()=>m,pages:()=>x,routeModule:()=>u,tree:()=>d}),a(6608),a(5781),a(5866);var t=a(3191),l=a(8716),r=a(7922),n=a.n(r),i=a(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);a.d(s,c);let d=["",{children:["games",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6608)),"/home/runner/work/KazRPG/KazRPG/src/app/games/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5781)),"/home/runner/work/KazRPG/KazRPG/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],x=["/home/runner/work/KazRPG/KazRPG/src/app/games/page.tsx"],m="/games/page",o={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/games/page",pathname:"/games",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3756:(e,s,a)=>{Promise.resolve().then(a.bind(a,3335)),Promise.resolve().then(a.bind(a,1968))},3335:(e,s,a)=>{"use strict";a.d(s,{GameList:()=>y});var t=a(326),l=a(7577),r=a(434),n=a(2881);let i=(0,n.Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),c=(0,n.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),d=(0,n.Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),x=(0,n.Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),m=(0,n.Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var o=a(9837),u=a(6792),h=a(1223);function g({game:e,className:s=""}){let a=e.maxPlayers-e.currentPlayers,l=0===a;return t.jsx("div",{className:`card-gradient rounded-xl overflow-hidden hover:border-purple-500/30 transition-all duration-300 shadow-lg hover:shadow-purple-500/10 ${s}`,children:(0,t.jsxs)("div",{className:"p-6 pb-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[t.jsx(u.C,{variant:"info",className:"text-xs",children:(0,h.x9)(e.gameSystem)}),t.jsx(u.C,{variant:"BEGINNER_FRIENDLY"===e.difficulty?"success":"EXPERT_ONLY"===e.difficulty?"danger":"warning",className:"text-xs",children:(0,h.mq)(e.difficulty)})]}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2 line-clamp-2",children:e.title}),t.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-slate-700/50",children:[(0,t.jsxs)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold",children:[e.gm.firstName.charAt(0),e.gm.lastName.charAt(0)]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"text-white font-medium",children:e.gm.username}),e.gm.isVerified&&t.jsx(u.C,{variant:"success",className:"text-xs",children:"✓"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(i,{className:"w-3 h-3 text-yellow-400 fill-current"}),t.jsx("span",{className:"text-yellow-400 text-sm",children:e.gm.rating}),e.gm.city&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"text-gray-500",children:"•"}),t.jsx("span",{className:"text-gray-400 text-sm",children:e.gm.city})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[t.jsx(c,{className:"w-4 h-4"}),t.jsx("span",{children:(0,h.p6)(e.startDate)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[t.jsx(d,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[e.currentPlayers,"/",e.maxPlayers," игроков"]}),a<=2&&a>0&&(0,t.jsxs)(u.C,{variant:"warning",className:"text-xs ml-2",children:["Осталось ",a]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[t.jsx(x,{className:"w-4 h-4"}),t.jsx("span",{children:e.isOnline?"Онлайн":e.city||"Не указано"})]})]}),e.tags&&(()=>{try{let s=JSON.parse(e.tags);return s.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mb-4",children:[s.slice(0,3).map((e,s)=>t.jsx(u.C,{variant:"default",className:"text-xs",children:e},s)),s.length>3&&(0,t.jsxs)("span",{className:"text-gray-500 text-xs px-2 py-1",children:["+",s.length-3]})]})}catch{return null}})(),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center gap-1",children:e.pricePerSession?(0,t.jsxs)(t.Fragment,{children:[t.jsx(m,{className:"w-4 h-4 text-green-400"}),(0,t.jsxs)("span",{className:"text-green-400 font-bold",children:[(0,h.T4)(e.pricePerSession)," ₸"]}),t.jsx("span",{className:"text-gray-500 text-xs",children:"/сессия"})]}):t.jsx("span",{className:"text-green-400 font-bold",children:"Бесплатно"})}),t.jsx(r.default,{href:`/games/${e.id}`,children:t.jsx(o.z,{size:"sm",disabled:l,variant:l?"outline":"default",children:l?"Мест нет":"Подробнее"})})]})]})})}function p({className:e,...s}){return t.jsx("div",{className:(0,h.cn)("animate-pulse rounded-md bg-slate-700/50",e),...s})}function f(){return(0,t.jsxs)("div",{className:"card-gradient rounded-xl p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[t.jsx(p,{className:"h-6 w-20"}),t.jsx(p,{className:"h-6 w-24"})]}),t.jsx(p,{className:"h-6 w-3/4"}),t.jsx(p,{className:"h-4 w-full"}),t.jsx(p,{className:"h-4 w-2/3"}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 py-4 border-t border-slate-700/50",children:[t.jsx(p,{className:"h-10 w-10 rounded-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p,{className:"h-4 w-24"}),t.jsx(p,{className:"h-3 w-32"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p,{className:"h-4 w-48"}),t.jsx(p,{className:"h-4 w-40"}),t.jsx(p,{className:"h-4 w-36"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx(p,{className:"h-5 w-20"}),t.jsx(p,{className:"h-8 w-24"})]})]})}function j({children:e,hasNextPage:s,isFetchingNextPage:a,fetchNextPage:r,loader:n,threshold:i=100}){let c=(0,l.useRef)(null);return(0,l.useCallback)(e=>{let[t]=e;t.isIntersecting&&s&&!a&&r()},[s,a,r]),(0,t.jsxs)(t.Fragment,{children:[e,s&&t.jsx("div",{ref:c,className:"flex justify-center py-8",children:a?n||t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}):null})]})}var v=a(5047);function y(){let e=(0,v.useSearchParams)(),{data:s,loading:a,error:r,hasNextPage:n,fetchNextPage:i,isFetchingNextPage:c,refresh:d}=function(e={}){let[s,a]=(0,l.useState)([]),[t,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0),[x,m]=(0,l.useState)(1),o=(0,l.useCallback)(async(s,t=!1)=>{r(!0),i(null);try{let l=new URLSearchParams({page:s.toString(),limit:"12",...Object.fromEntries(Object.entries(e).filter(([e,s])=>void 0!==s))}),r=await fetch(`/api/games?${l}`);if(!r.ok)throw Error("Failed to fetch games");let n=await r.json();t?a(n.games):a(e=>[...e,...n.games]),d(s<n.pagination.pages),m(s)}catch(e){i(e instanceof Error?e.message:"Unknown error")}finally{r(!1)}},[e]),u=(0,l.useCallback)(()=>{!t&&c&&o(x+1)},[o,x,c,t]);return{data:s,loading:t,error:n,hasNextPage:c,fetchNextPage:u,refresh:(0,l.useCallback)(()=>{m(1),o(1,!0)},[o]),isFetchingNextPage:t&&x>1}}((0,l.useMemo)(()=>({city:e.get("city")||void 0,gameSystem:e.get("gameSystem")||void 0,isOnline:"true"===e.get("isOnline")||"false"!==e.get("isOnline")&&void 0,language:e.get("language")||void 0,difficulty:e.get("difficulty")||void 0,search:e.get("search")||void 0}),[e]));return r?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsxs)("p",{className:"text-red-400 mb-4",children:["Ошибка загрузки игр: ",r]}),t.jsx("button",{onClick:d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Попробовать снова"})]}):a&&0===s.length?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,s)=>t.jsx(f,{},s))}):0===s.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-400 text-lg mb-4",children:"Игры не найдены"}),t.jsx("p",{className:"text-gray-500",children:"Попробуйте изменить фильтры поиска"})]}):t.jsx(j,{hasNextPage:n,isFetchingNextPage:c,fetchNextPage:i,loader:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((e,s)=>t.jsx(f,{},`loading-${s}`))}),children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>t.jsx(g,{game:e},e.id))})})}},1968:(e,s,a)=>{"use strict";a.d(s,{GameSearch:()=>h});var t=a(326),l=a(7577),r=a(5047),n=a(8307);let i=(0,a(2881).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var c=a(9175),d=a(9837),x=a(6792);let m=[{value:"DND5E",label:"D&D 5e"},{value:"PATHFINDER2E",label:"Pathfinder 2e"},{value:"CALL_OF_CTHULHU",label:"Зов Ктулху"},{value:"VAMPIRE",label:"Вампир"},{value:"SHADOWRUN",label:"Shadowrun"},{value:"CYBERPUNK",label:"Cyberpunk"},{value:"WARHAMMER40K",label:"Warhammer 40K"},{value:"OTHER",label:"Другие"}],o=["Алматы","Астана","Шымкент","Актобе","Тараз"],u=[{value:"BEGINNER_FRIENDLY",label:"Для новичков"},{value:"INTERMEDIATE",label:"Средний уровень"},{value:"ADVANCED",label:"Продвинутый"},{value:"EXPERT_ONLY",label:"Только эксперты"}];function h(){let e=(0,r.useRouter)(),s=(0,r.useSearchParams)(),[a,h]=(0,l.useState)(!1),[g,p]=(0,l.useState)({search:s.get("search")||"",gameSystem:s.get("gameSystem")||"",city:s.get("city")||"",difficulty:s.get("difficulty")||"",isOnline:s.get("isOnline")||""}),f=()=>{let s=new URLSearchParams;Object.entries(g).forEach(([e,a])=>{a&&s.set(e,a)}),e.push(`/games?${s.toString()}`)},j=Object.values(g).filter(Boolean).length-(g.search?1:0);return(0,t.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[t.jsx(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(c.I,{value:g.search,onChange:e=>p({...g,search:e.target.value}),placeholder:"Поиск игр, мастеров, систем...",className:"pl-10",onKeyDown:e=>"Enter"===e.key&&f()})]}),t.jsx(d.z,{onClick:f,children:"Найти"}),(0,t.jsxs)(d.z,{variant:"outline",onClick:()=>h(!a),className:"relative",children:[t.jsx(i,{className:"w-4 h-4 mr-2"}),"Фильтры",j>0&&t.jsx(x.C,{variant:"info",className:"ml-2 px-1.5 py-0.5 text-xs",children:j})]})]}),a&&(0,t.jsxs)("div",{className:"card-gradient rounded-xl p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Игровая система"}),(0,t.jsxs)("select",{value:g.gameSystem,onChange:e=>p({...g,gameSystem:e.target.value}),className:"w-full rounded-lg border border-slate-600 bg-slate-800 px-3 py-2 text-white",children:[t.jsx("option",{value:"",children:"Все системы"}),m.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Город"}),(0,t.jsxs)("select",{value:g.city,onChange:e=>p({...g,city:e.target.value}),className:"w-full rounded-lg border border-slate-600 bg-slate-800 px-3 py-2 text-white",children:[t.jsx("option",{value:"",children:"Все города"}),o.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Сложность"}),(0,t.jsxs)("select",{value:g.difficulty,onChange:e=>p({...g,difficulty:e.target.value}),className:"w-full rounded-lg border border-slate-600 bg-slate-800 px-3 py-2 text-white",children:[t.jsx("option",{value:"",children:"Любая сложность"}),u.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Формат"}),(0,t.jsxs)("select",{value:g.isOnline,onChange:e=>p({...g,isOnline:e.target.value}),className:"w-full rounded-lg border border-slate-600 bg-slate-800 px-3 py-2 text-white",children:[t.jsx("option",{value:"",children:"Онлайн и оффлайн"}),t.jsx("option",{value:"true",children:"Только онлайн"}),t.jsx("option",{value:"false",children:"Только оффлайн"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[t.jsx(d.z,{onClick:f,className:"flex-1",children:"Применить фильтры"}),j>0&&t.jsx(d.z,{variant:"ghost",onClick:()=>{p({search:"",gameSystem:"",city:"",difficulty:"",isOnline:""}),e.push("/games")},children:"Очистить"})]})]})]})}},6792:(e,s,a)=>{"use strict";a.d(s,{C:()=>r});var t=a(326);a(7577);var l=a(1223);function r({className:e,variant:s="default",...a}){return t.jsx("div",{className:(0,l.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{default:"bg-slate-700 text-slate-200",success:"bg-green-600 text-green-100",warning:"bg-yellow-600 text-yellow-100",danger:"bg-red-600 text-red-100",info:"bg-blue-600 text-blue-100"}[s],e),...a})}},9175:(e,s,a)=>{"use strict";a.d(s,{I:()=>n});var t=a(326),l=a(7577),r=a(1223);let n=l.forwardRef(({className:e,label:s,error:a,type:l="text",...n},i)=>(0,t.jsxs)("div",{className:"space-y-1",children:[s&&t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:s}),t.jsx("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-lg border border-slate-600 bg-slate-800 px-3 py-2 text-white placeholder:text-gray-400 focus:border-purple-500 focus:outline-none focus:ring-1 focus:ring-purple-500 disabled:cursor-not-allowed disabled:opacity-50",a&&"border-red-500 focus:border-red-500 focus:ring-red-500",e),ref:i,...n}),a&&t.jsx("p",{className:"text-sm text-red-400",children:a})]}));n.displayName="Input"},6608:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(9510),l=a(1159),r=a(8570);let n=(0,r.createProxy)(String.raw`/home/runner/work/KazRPG/KazRPG/src/components/games/GameSearch.tsx#GameSearch`),i=(0,r.createProxy)(String.raw`/home/runner/work/KazRPG/KazRPG/src/components/games/GameList.tsx#GameList`);var c=a(7279);function d(){return t.jsx("div",{className:"min-h-screen py-20",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[t.jsx("h1",{className:"text-4xl font-bold gradient-text mb-4",children:"Найди свою идеальную игру"}),t.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Более 100 активных игр в Алматы, Астане и онлайн. D&D, Pathfinder, Call of Cthulhu и многое другое."})]}),t.jsx(l.Suspense,{fallback:t.jsx("div",{className:"flex justify-center py-4",children:t.jsx(c.T,{size:"md"})}),children:t.jsx(n,{})}),t.jsx(l.Suspense,{fallback:t.jsx("div",{className:"flex justify-center py-20",children:t.jsx(c.T,{size:"lg"})}),children:t.jsx(i,{})})]})})}},7279:(e,s,a)=>{"use strict";a.d(s,{T:()=>r});var t=a(9510),l=a(644);function r({size:e="md",className:s}){return t.jsx("div",{className:(0,l.cn)("animate-spin rounded-full border-2 border-gray-300 border-t-purple-600",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[e],s)})}},644:(e,s,a)=>{"use strict";a.d(s,{T4:()=>d,cn:()=>i,mq:()=>m,p6:()=>c,x9:()=>x});var t=a(5761),l=a(2386),r=a(6965),n=a(6611);function i(...e){return(0,l.m6)((0,t.W)(e))}function c(e){return(0,r.Z)(new Date(e),"d MMMM yyyy, HH:mm",{locale:n.Z})}function d(e){return new Intl.NumberFormat("ru-RU").format(e)}function x(e){return({DND5E:"D&D 5e",PATHFINDER2E:"Pathfinder 2e",CALL_OF_CTHULHU:"Зов Ктулху",VAMPIRE:"Вампир",SHADOWRUN:"Shadowrun",CYBERPUNK:"Cyberpunk",WARHAMMER40K:"Warhammer 40K",OTHER:"Другая система"})[e]||e}function m(e){return({BEGINNER_FRIENDLY:"Для новичков",INTERMEDIATE:"Средний уровень",ADVANCED:"Продвинутый",EXPERT_ONLY:"Только эксперты"})[e]||e}}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[948,814,211,993],()=>a(1406));module.exports=t})();