(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{946:function(e,s,t){Promise.resolve().then(t.t.bind(t,2972,23)),Promise.resolve().then(t.bind(t,2456))},7769:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2208:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2456:function(e,s,t){"use strict";t.d(s,{SignUpForm:function(){return u}});var r=t(7437),a=t(2265),l=t(9376),n=t(2827),i=t(6334),o=t(9356),d=t(7769),c=t(2208);function u(){let e=(0,l.useRouter)(),[s,t]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),[f,p]=(0,a.useState)({email:"",username:"",firstName:"",lastName:"",password:"",confirmPassword:"",city:"",language:"RU",isGM:!1}),[g,b]=(0,a.useState)({}),v=()=>{let e={};return f.email||(e.email="Email обязателен"),f.username||(e.username="Имя пользователя обязательно"),f.username.length<3&&(e.username="Минимум 3 символа"),f.firstName||(e.firstName="Имя обязательно"),f.lastName||(e.lastName="Фамилия обязательна"),f.password||(e.password="Пароль обязателен"),f.password.length<8&&(e.password="Минимум 8 символов"),f.password!==f.confirmPassword&&(e.confirmPassword="Пароли не совпадают"),b(e),0===Object.keys(e).length},N=async s=>{if(s.preventDefault(),v()){t(!0);try{let s=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),t=await s.json();if(s.ok)o.A.success("Аккаунт создан! Проверьте email для подтверждения."),e.push("/auth/signin");else{var r;o.A.error((null===(r=t.error)||void 0===r?void 0:r.message)||"Ошибка регистрации")}}catch(e){o.A.error("Произошла ошибка при регистрации")}finally{t(!1)}}};return(0,r.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(n.I,{label:"Имя",value:f.firstName,onChange:e=>p({...f,firstName:e.target.value}),error:g.firstName,required:!0,disabled:s}),(0,r.jsx)(n.I,{label:"Фамилия",value:f.lastName,onChange:e=>p({...f,lastName:e.target.value}),error:g.lastName,required:!0,disabled:s})]}),(0,r.jsx)(n.I,{label:"Email",type:"email",value:f.email,onChange:e=>p({...f,email:e.target.value}),error:g.email,required:!0,disabled:s}),(0,r.jsx)(n.I,{label:"Имя пользователя",value:f.username,onChange:e=>p({...f,username:e.target.value}),error:g.username,placeholder:"Только буквы, цифры и _",required:!0,disabled:s}),(0,r.jsx)(n.I,{label:"Город (необязательно)",value:f.city,onChange:e=>p({...f,city:e.target.value}),placeholder:"Алматы, Астана, Шымкент...",disabled:s}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.I,{label:"Пароль",type:u?"text":"password",value:f.password,onChange:e=>p({...f,password:e.target.value}),error:g.password,required:!0,disabled:s}),(0,r.jsx)("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-9 text-gray-400 hover:text-white",children:u?(0,r.jsx)(d.Z,{className:"w-4 h-4"}):(0,r.jsx)(c.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.I,{label:"Подтвердите пароль",type:x?"text":"password",value:f.confirmPassword,onChange:e=>p({...f,confirmPassword:e.target.value}),error:g.confirmPassword,required:!0,disabled:s}),(0,r.jsx)("button",{type:"button",onClick:()=>h(!x),className:"absolute right-3 top-9 text-gray-400 hover:text-white",children:x?(0,r.jsx)(d.Z,{className:"w-4 h-4"}):(0,r.jsx)(c.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Язык"}),(0,r.jsxs)("select",{value:f.language,onChange:e=>p({...f,language:e.target.value}),className:"w-full rounded-lg border border-slate-600 bg-slate-800 px-3 py-2 text-white",disabled:s,children:[(0,r.jsx)("option",{value:"RU",children:"Русский"}),(0,r.jsx)("option",{value:"KK",children:"Қазақша"}),(0,r.jsx)("option",{value:"EN",children:"English"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"isGM",checked:f.isGM,onChange:e=>p({...f,isGM:e.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-purple-600",disabled:s}),(0,r.jsx)("label",{htmlFor:"isGM",className:"text-sm text-gray-300",children:"Я мастер игр (ГМ)"})]}),(0,r.jsx)(i.z,{type:"submit",className:"w-full",disabled:s,children:s?"Создание аккаунта...":"Создать аккаунт"})]})}},6334:function(e,s,t){"use strict";t.d(s,{z:function(){return l}});var r=t(7437);t(2265);var a=t(3448);function l(e){let{className:s,variant:t="default",size:l="md",...n}=e;return(0,r.jsx)("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{default:"bg-purple-600 text-white hover:bg-purple-700 focus:ring-purple-500",outline:"border border-purple-600 text-purple-600 hover:bg-purple-50 focus:ring-purple-500",ghost:"text-purple-600 hover:bg-purple-50 focus:ring-purple-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[t],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-base",lg:"h-12 px-6 text-lg"}[l],s),...n})}},2827:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var r=t(7437),a=t(2265),l=t(3448);let n=a.forwardRef((e,s)=>{let{className:t,label:a,error:n,type:i="text",...o}=e;return(0,r.jsxs)("div",{className:"space-y-1",children:[a&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:a}),(0,r.jsx)("input",{type:i,className:(0,l.cn)("flex h-10 w-full rounded-lg border border-slate-600 bg-slate-800 px-3 py-2 text-white placeholder:text-gray-400 focus:border-purple-500 focus:outline-none focus:ring-1 focus:ring-purple-500 disabled:cursor-not-allowed disabled:opacity-50",n&&"border-red-500 focus:border-red-500 focus:ring-red-500",t),ref:s,...o}),n&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:n})]})});n.displayName="Input"},9356:function(e,s,t){"use strict";t.d(s,{A:function(){return d},Toaster:function(){return c}});var r=t(7437),a=t(9064),l=t(1671),n=t(9388),i=t(3245),o=t(9322);let d={success:e=>{a.Am.custom(s=>(0,r.jsxs)("div",{className:"".concat(s.visible?"animate-enter":"animate-leave"," max-w-md w-full bg-green-600 shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5"),children:[(0,r.jsx)("div",{className:"flex-1 w-0 p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(l.Z,{className:"h-6 w-6 text-green-100"})}),(0,r.jsx)("div",{className:"ml-3 flex-1",children:(0,r.jsx)("p",{className:"text-sm font-medium text-white",children:e})})]})}),(0,r.jsx)("div",{className:"flex border-l border-green-500",children:(0,r.jsx)("button",{onClick:()=>a.Am.dismiss(s.id),className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-green-100 hover:text-white focus:outline-none",children:"\xd7"})})]}),{duration:4e3})},error:e=>{a.Am.custom(s=>(0,r.jsxs)("div",{className:"".concat(s.visible?"animate-enter":"animate-leave"," max-w-md w-full bg-red-600 shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5"),children:[(0,r.jsx)("div",{className:"flex-1 w-0 p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(n.Z,{className:"h-6 w-6 text-red-100"})}),(0,r.jsx)("div",{className:"ml-3 flex-1",children:(0,r.jsx)("p",{className:"text-sm font-medium text-white",children:e})})]})}),(0,r.jsx)("div",{className:"flex border-l border-red-500",children:(0,r.jsx)("button",{onClick:()=>a.Am.dismiss(s.id),className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-red-100 hover:text-white focus:outline-none",children:"\xd7"})})]}),{duration:6e3})},info:e=>{a.Am.custom(s=>(0,r.jsxs)("div",{className:"".concat(s.visible?"animate-enter":"animate-leave"," max-w-md w-full bg-blue-600 shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5"),children:[(0,r.jsx)("div",{className:"flex-1 w-0 p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(i.Z,{className:"h-6 w-6 text-blue-100"})}),(0,r.jsx)("div",{className:"ml-3 flex-1",children:(0,r.jsx)("p",{className:"text-sm font-medium text-white",children:e})})]})}),(0,r.jsx)("div",{className:"flex border-l border-blue-500",children:(0,r.jsx)("button",{onClick:()=>a.Am.dismiss(s.id),className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-blue-100 hover:text-white focus:outline-none",children:"\xd7"})})]}),{duration:4e3})},warning:e=>{a.Am.custom(s=>(0,r.jsxs)("div",{className:"".concat(s.visible?"animate-enter":"animate-leave"," max-w-md w-full bg-yellow-600 shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5"),children:[(0,r.jsx)("div",{className:"flex-1 w-0 p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(o.Z,{className:"h-6 w-6 text-yellow-100"})}),(0,r.jsx)("div",{className:"ml-3 flex-1",children:(0,r.jsx)("p",{className:"text-sm font-medium text-white",children:e})})]})}),(0,r.jsx)("div",{className:"flex border-l border-yellow-500",children:(0,r.jsx)("button",{onClick:()=>a.Am.dismiss(s.id),className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-yellow-100 hover:text-white focus:outline-none",children:"\xd7"})})]}),{duration:5e3})}};function c(){return(0,r.jsx)(a.x7,{position:"bottom-right"})}},3448:function(e,s,t){"use strict";t.d(s,{T4:function(){return d},cn:function(){return i},mq:function(){return u},p6:function(){return o},x9:function(){return c}});var r=t(1994),a=t(3335),l=t(5948),n=t(692);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}function o(e){return(0,l.Z)(new Date(e),"d MMMM yyyy, HH:mm",{locale:n.Z})}function d(e){return new Intl.NumberFormat("ru-RU").format(e)}function c(e){return({DND5E:"D&D 5e",PATHFINDER2E:"Pathfinder 2e",CALL_OF_CTHULHU:"Зов Ктулху",VAMPIRE:"Вампир",SHADOWRUN:"Shadowrun",CYBERPUNK:"Cyberpunk",WARHAMMER40K:"Warhammer 40K",OTHER:"Другая система"})[e]||e}function u(e){return({BEGINNER_FRIENDLY:"Для новичков",INTERMEDIATE:"Средний уровень",ADVANCED:"Продвинутый",EXPERT_ONLY:"Только эксперты"})[e]||e}}},function(e){e.O(0,[436,972,870,971,117,744],function(){return e(e.s=946)}),_N_E=e.O()}]);